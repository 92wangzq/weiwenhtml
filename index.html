<!DOCTYPE html>
<html lang="en">

	<head>
		<title>通辽市维稳信息平台</title>
		<meta charset="utf-8">
		<link href="/css/bootstrap/bootstrap.min.css" rel="stylesheet" />
		<link href="/css/font-awesome/css/font-awesome.css" rel="stylesheet" />

		<link href="/css/animate.css" rel="stylesheet" />
		<link href="/css/style.css" rel="stylesheet" />
		<!-- 引入bootstrap-table样式 -->
		<link href="/css/bootstrap/bootstrap-table/bootstrap-table.css" rel="stylesheet">
		<!-- 引入bootstrap-datetimepicker样式 -->
		<link href="/css/bootstrap/bootstrap-datetimepicker/bootstrap-datetimepicker.min.css" rel="stylesheet">
		<link href="/css/bootstrap/bootstrap-editable/bootstrap-editable.css" rel="stylesheet">
		<link rel="stylesheet" href="/css/message.css">
	</head>

	<body style="padding-bottom: 70px;">
		<div id="wrapper">
			<nav class="navbar-default navbar-static-side" role="navigation">
				<div class="sidebar-collapse">
					<ul class="nav metismenu" id="side-menu">
						<li class="nav-header">
							<span id="loginInfo" class="m-r-sm text-muted welcome-message">欢迎使用“”维稳信息平台</span>
						</li>
					</ul>
				</div>
			</nav>
			<div id="page-wrapper" class="gray-bg">
				<div class="row border-bottom">
					<nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0;height:66px;">
						<div class="navbar-header" style="width:100px;height:10px;">
						</div>
						<div class="navbar-header">
							<span class="navbar-minimalize"><h2>通辽市维稳信息管理系统</h2></span>
						</div>
						<ul class="nav navbar-top-links navbar-right">
							<li>
								<span id="nowTime" class="m-r-sm text-muted welcome-message"></span>
							</li>
							<li>
								<span class="m-r-sm text-muted welcome-message">修改密码</span>
							</li>
							<li>
								<a>
									<i id="logout" class="fa fa-sign-out"></i> 登 出
								</a>
							</li>
						</ul>
					</nav>
				</div>
				<div class="wrapper wrapper-content" id="content">
				</div>
				<nav class="navbar navbar-default navbar-fixed-bottom" style="margin: auto;min-height: auto;">
					<div class="container">
						<div class="pull-right">
							moxi <strong>moxi</strong> moxi.
						</div>
						<div>
							<strong>Copyright</strong> Example Company &copy; 2015-2025
						</div>
					</div>
				</nav>
			</div>
		</div>
	</body>
	<!-- Mainly scripts -->
	<script src="/js/jquery-2.1.1.js"></script>
	<script src="/js/jquery.cookie.js"></script>
	<script src="/js/util.js"></script>
	<script src="/js/bootstrap/bootstrap.min.js"></script>
	<script src="/js/plugins/metisMenu/jquery.metisMenu.js"></script>
	<script src="/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
	<!-- Custom and plugin javascript -->
	<script src="/js/plugins/pace/pace.min.js"></script>
	<!-- bootstrap-table.min.js -->
	<script src="/js/bootstrap/bootstrap-table/bootstrap-table.js"></script>
	<script src="/js/bootstrap/bootstrap-table/colResizable-1.6.min.js"></script>
	<script src="/js/bootstrap/bootstrap-table/colResizable-1.6.js"></script>
	<script src="/js/bootstrap/bootstrap-table/bootstrap-table-resizable.js"></script>
	<!-- bootstrap-table.min.js -->
	<script src="/js/bootstrap/bootstrap-datetimepicker/bootstrap-datetimepicker.js"></script>
	<!-- bootstrap-table.min.js -->
	<script src="/js/bootstrap/bootstrap-datetimepicker/locales/bootstrap-datetimepicker.zh-CN.js"></script>
	<!-- 引入中文语言包 -->
	<script src="https://cdn.bootcss.com/bootstrap-table/1.11.1/locale/bootstrap-table-zh-CN.min.js"></script>\
	<script src="/js/bootstrap/bootstrap-treeview/bootstrap-treeview.js"></script>
	<script src="/js/bootstrap/bootstrap-editable/bootstrap-editable.js"></script>
	<script src="/js/message.js"></script>
	<script src="/js/ueditor/ueditor.config.js"></script>
	<script src="/js/ueditor/ueditor.all.js"></script>
	<script src="/js/ueditor/lang/zh-cn/zh-cn.js"></script>
	<script>
		$(function() {
			var userName = $.cookie("userName");
			var userOid = $.cookie("userOid");
			if(!userName) {
				window.location.href = '/login.html';
			} else {
				$("#loginInfo").html("当前登录人：" + $.cookie("userName"));
			}

			//退出登录
			$("#logout").on('click', function() {
				$.ajax({
					type: "post",
					url: "/logout",
					success: function(rst) {
						if(rst.code == 0) {
							window.location = '/login.html';
						}
					}
				});
			});
			//加载菜单
			$.ajax({
				url: '/system/menus',
				type: 'post',
				dataType: 'json',
				success: function(rst) {
					console.log(rst);
					var menu = ""; //定义变量存储            
					$.each(rst, function(n, val) {
						menu += '<li>'
						menu += '<a href="#"><i class="fa fa-sitemap"></i><span class="nav-label">' + val.name + '</span><span class="fa arrow"></span></a>'
						menu += '<ul class="nav nav-second-level collapse userMenu" style="height: 0px;">';
						if(val.permissions != null) {
							$.each(val.permissions, function(n, two) {
								if(two.permissions != null) {
									menu += '<li>';
									menu += '<a href="#" id="damian">' + two.name + '<span class="fa arrow"></span></a>'
									menu += '<ul class="nav nav-third-level collapse userMenu">';
									$.each(two.permissions, function(n, three) {
										menu += '<li>';
										menu += '<a data-id="'+three.url+'">' + three.name + '</a>'
										menu += '</li>';
									});
									menu += '</ul>';
									menu += '</li>';
								} else {
									menu += '<li>';
									menu += '<a data-id="'+two.url+'">' + two.name + '</a>';
									menu += '</li>';
								}
							})
						}
						menu += '</ul>';
						menu += '</li>';
					})
					console.log(menu);
					$("#side-menu").append(menu);
					// MetsiMenu
					$('#side-menu').metisMenu();
					$(".userMenu").on("click", "a", function() {
						var sId = $(this).data("id"); //获取data-id的值
						window.location.hash = sId; //设置锚点
						loadInner(sId);
					});
				}
			});

			function loadInner(sId) {
				$("#content").load(sId); //加载相对应的内容
			}
			loadInner("personnel/personnelList.html");

			//首页top当前时间
			setInterval(function() {
				var date = new Date();
				var year = date.getFullYear(); //年
				var mon = date.getMonth() + 1; //月
				var day = date.getDate(); //日
				var hh = date.getHours(); //时
				var mm = date.getMinutes(); //分
				var ss = date.getSeconds(); //秒
				var today = new Array("星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六");
				var xq = today[date.getDay()];
				var daytime;
				daytime = year + "/" + mon + "/" + day + " " + xq;
				var time;
				if(mm < 10) {
					mm = "0" + mm;
				}
				if(ss < 10) {
					ss = "0" + ss;
				}
				time = "当前时间" + hh + ":" + mm + ":" + ss;
				$("#nowTime").html(daytime + " " + time);
			}, 1000);

			/**
			 * js实时时间
			 */
			function getDate() {
				var today = new Date();
				var date = today.getFullYear() + "-" + twoDigits(today.getMonth() + 1) + "-" + twoDigits(today.getDate()) + " ";
				var week = " 星期" + "日一二三四五六 ".charAt(today.getDay());
				var time = twoDigits(today.getHours()) + ": " + twoDigits(today.getMinutes()) + ": " + twoDigits(today.getSeconds());
				$("#nowTime").html(date + " " + time);
			}

			function twoDigits(val) {
				if(val < 10) return "0" + val;
				return val;
			}
		});
	</script>

</html>